<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Woman Who Saved My Life - An Interactive Book</title>
    
    <!-- Tailwind CSS for modern styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts for elegant typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Raleway:wght@300;400&display=swap" rel="stylesheet">
    
    <!-- Tone.js for audio effects -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>

    <style>
        /* Custom styles to complement Tailwind */
        :root {
            /* Fluid typography using clamp() for smooth scaling */
            --font-size-p: clamp(0.65rem, 2.2vw, 1rem); /* Scales for very small to large screens */
            --font-size-h1: clamp(1.2rem, 5vw, 3rem); 
            --font-size-h2: clamp(1.1rem, 4vw, 2.25rem);
        }

        body {
            font-family: 'Raleway', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        h1, h2, h3 {
            font-family: 'Playfair Display', serif;
        }

        /* 3D setup for the book container */
        .book {
            perspective: 2500px;
            transition: transform 0.5s ease;
            transform: rotateX(10deg);
        }
        
        .book:hover {
            transform: rotateX(0deg);
        }

        /* This preserves the 3D transformations for child elements */
        .preserve-3d {
            transform-style: preserve-3d;
        }

        /* Base page styles */
        .page {
            transform-origin: left center;
            transition: transform 1s cubic-bezier(0.645, 0.045, 0.355, 1);
            transform-style: preserve-3d;
        }

        /* When a page is flipped, it rotates on its Y-axis */
        .flipped {
            transform: rotateY(-180deg);
        }

        /* Hides the back of an element during 3D transformations */
        .backface-hidden {
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
        }
        
        /* Custom shadow to simulate page depth */
        .page-shadow-right {
            background: linear-gradient(to right, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0) 15%);
        }
        .page-shadow-left {
            background: linear-gradient(to left, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0) 15%);
        }

        /* Fix for the back of the page content */
        .back {
            transform: rotateY(180deg);
        }

        /* Magical text style */
        .magical-text {
            background: linear-gradient(to right, #8B5CF6, #EC4899);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 8px rgba(236, 72, 153, 0.3);
            font-size: var(--font-size-p);
            line-height: 1.6;
        }
        
        /* Applying fluid font sizes */
        .title-main { font-size: var(--font-size-h1); }
        .title-end { font-size: var(--font-size-h2); }
    </style>
</head>
<body class="bg-gradient-to-br from-pink-200 to-green-200 flex items-center justify-center min-h-screen overflow-hidden p-2 sm:p-4">

    <!-- Book Container -->
    <!-- MODIFIED: Changed aspect ratio to be taller on mobile (3/4) and wider on larger screens (4/3) -->
    <div id="book" class="book w-full h-auto aspect-[3/4] sm:aspect-[4/3] max-w-md sm:max-w-[1000px] max-h-[calc(100vh-2rem)] relative">

        <!-- Back Cover and Spine for CLOSED book -->
        <div id="back-cover" class="w-1/2 h-full bg-pink-500 absolute right-0 preserve-3d rounded-r-lg shadow-2xl transition-opacity duration-500">
             <div class="absolute inset-0 bg-gradient-to-l from-black/20"></div>
        </div>

        <!-- All Pages -->
        <!-- Page 1 (Front Cover) -->
        <div class="page absolute w-1/2 h-full right-0" data-page-num="1">
            <div class="front w-full h-full absolute backface-hidden bg-pink-100 rounded-r-lg shadow-2xl flex flex-col items-center justify-center p-3 sm:p-4 md:p-6 lg:p-8 overflow-hidden">
                <div class="w-full h-1/2 flex-shrink-0">
                    <img src="https://placehold.co/400x300/fecdd3/db2777?text=A+Helping+Hand" 
                         alt="A helping hand" 
                         class="w-full h-full object-cover rounded-lg shadow-lg">
                </div>
                <div class="relative z-10 text-center mt-4 flex-grow">
                    <h1 class="title-main font-bold italic text-pink-700 leading-tight">The Woman Who Saved My Life</h1>
                </div>
                 <p class="absolute bottom-4 text-xs font-semibold animate-pulse z-10 cursor-pointer text-pink-700/80">Click to open</p>
            </div>
            <div class="back w-full h-full absolute backface-hidden bg-[#fffef5] rounded-l-lg p-3 sm:p-4 md:p-6 lg:p-8 flex flex-col justify-center page-shadow-left">
                <div class="flex flex-col h-full">
                    <div class="w-full h-1/3 flex-shrink-0 mb-4">
                        <img src="https://placehold.co/400x200/fef3c7/f97316?text=Sanctuary" alt="Library" class="w-full h-full object-cover rounded-md shadow-md">
                    </div>
                    <div class="flex-grow overflow-y-auto">
                        <p class="magical-text text-justify">It was July of 2024, when one man who had been living each day as if it were the same thing over and over and over again, decided to do something that he doesn't usually do. Not because he wanted to do it, no, but because his entire being was being called towards it. There was a woman, the prettiest he had ever seen, just there on his mobile screen. So, with his mind uncertain, his heart scared, he decided to do it; he decided to approach the woman who he thought was an angel on Earth.</p>
                    </div>
                </div>
                <div class="page-number absolute bottom-2 left-2 sm:bottom-4 sm:left-4 text-xs text-gray-400">2</div>
            </div>
        </div>

        <!-- Page 2 -->
        <div class="page absolute w-1/2 h-full right-0" data-page-num="2">
            <div class="front w-full h-full absolute backface-hidden bg-[#fffef5] rounded-r-lg p-3 sm:p-4 md:p-6 lg:p-8 flex flex-col justify-center page-shadow-right">
                 <div class="flex flex-col h-full">
                    <div class="w-full h-1/3 flex-shrink-0 mb-4">
                        <img src="https://placehold.co/400x200/dbeafe/3b82f6?text=Fateful+Encounter" alt="Brushing hands" class="w-full h-full object-cover rounded-md shadow-md">
                    </div>
                    <div class="flex-grow overflow-y-auto">
                        <p class="magical-text text-justify">One rainy Tuesday, while reaching for a book on constellations, her fingers brushed against another's. She looked up into the kindest eyes she had ever seen. They belonged to Liam, a writer who found his muse in the same silence she cherished.</p>
                    </div>
                </div>
                <div class="page-number absolute bottom-2 right-2 sm:bottom-4 sm:right-4 text-xs text-gray-400">3</div>
            </div>
            <div class="back w-full h-full absolute backface-hidden bg-[#fffef5] rounded-l-lg p-3 sm:p-4 md:p-6 lg:p-8 flex flex-col justify-center page-shadow-left">
                <div class="flex flex-col h-full">
                     <div class="w-full h-1/3 flex-shrink-0 mb-4">
                        <img src="https://placehold.co/400x200/fce7f3/ec4899?text=A+Secret+Note" alt="A note in a book" class="w-full h-full object-cover rounded-md shadow-md">
                    </div>
                    <div class="flex-grow overflow-y-auto">
                        <p class="magical-text text-justify">They didn't speak much that day, just a shared, shy smile. But the next time Elara visited, she found a small, folded note tucked into her favorite astronomy book. "I saw a new star when I met you," it read. Her heart fluttered.</p>
                    </div>
                </div>
                <div class="page-number absolute bottom-2 left-2 sm:bottom-4 sm:left-4 text-xs text-gray-400">4</div>
            </div>
        </div>

        <!-- Page 3 -->
        <div class="page absolute w-1/2 h-full right-0" data-page-num="3">
            <div class="front w-full h-full absolute backface-hidden bg-[#fffef5] rounded-r-lg p-3 sm:p-4 md:p-6 lg:p-8 flex flex-col justify-center page-shadow-right">
                <div class="flex flex-col h-full">
                     <div class="w-full h-1/3 flex-shrink-0 mb-4">
                        <img src="https://placehold.co/400x200/e0e7ff/6366f1?text=Whispered+Words" alt="Coffee cups" class="w-full h-full object-cover rounded-md shadow-md">
                    </div>
                    <div class="flex-grow overflow-y-auto">
                        <p class="magical-text text-justify">A correspondence began, whispered through notes left in book jackets and on due date slips. They wrote of stars and stories, of dreams and quiet joys. The library, once a place of solitude, now felt like a shared secret, a world built just for two.</p>
                    </div>
                </div>
                <div class="page-number absolute bottom-2 right-2 sm:bottom-4 sm:right-4 text-xs text-gray-400">5</div>
            </div>
            <div class="back w-full h-full absolute backface-hidden bg-[#fffef5] rounded-l-lg p-3 sm:p-4 md:p-6 lg:p-8 flex flex-col justify-center page-shadow-left">
                <div class="flex flex-col h-full">
                     <div class="w-full h-1/3 flex-shrink-0 mb-4">
                        <img src="https://placehold.co/400x200/fee2e2/ef4444?text=New+Beginnings" alt="Two people talking" class="w-full h-full object-cover rounded-md shadow-md">
                    </div>
                    <div class="flex-grow overflow-y-auto">
                        <p class="magical-text text-justify">Finally, a note from Liam asked not for a book recommendation, but for a coffee. And as they sat across from each other, the silence was finally, comfortably, broken. Their story, which began with a gentle touch, was now ready for its first chapter outside the library walls.</p>
                    </div>
                </div>
                <div class="page-number absolute bottom-2 left-2 sm:bottom-4 sm:left-4 text-xs text-gray-400">6</div>
            </div>
        </div>

        <!-- Page 4 (End Page) -->
        <div class="page absolute w-1/2 h-full right-0" data-page-num="4">
            <div class="front w-full h-full absolute backface-hidden bg-[#fffef5] rounded-r-lg p-3 sm:p-4 md:p-6 lg:p-8 flex flex-col items-center justify-center page-shadow-right">
                <div class="text-4xl md:text-5xl mb-4">✨</div>
                <h2 class="title-end text-pink-500">The End</h2>
                <p class="mt-2 text-sm md:text-base text-gray-600">Or perhaps, the beginning...</p>
                <div class="page-number absolute bottom-2 right-2 sm:bottom-4 sm:right-4 text-xs text-gray-400">7</div>
            </div>
            <div class="back w-full h-full absolute backface-hidden bg-pink-100 rounded-l-lg shadow-inner flex flex-col items-center justify-center p-3 sm:p-4 md:p-6 lg:p-8 overflow-hidden">
                <img src="https://i.imgur.com/O3i7v4o.png" 
                     alt="Back Cover Illustration" 
                     class="w-2/3 max-w-[250px] rounded-lg shadow-lg"
                     onerror="this.onerror=null;this.src='https://placehold.co/250x250/fecdd3/db2777?text=Back+Cover';">
                <p class="text-sm text-pink-800/80 mt-4 text-center italic">"A story of kindness and unexpected friendship."</p>
                <a href="https://www.instagram.com/maryliciooo7/" target="_blank" rel="noopener noreferrer" class="absolute bottom-2 right-2 w-16 h-12 sm:w-20 sm:h-14 md:w-24 md:h-16 bg-white/70 flex flex-col items-center justify-center text-xs text-gray-500 p-1 rounded cursor-pointer hover:bg-white transition-colors">
                    <p class="text-[8px]">ISBN 123-4-567-89012-3</p>
                    <svg class="w-full h-8 mt-1" version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 100 40" preserveAspectRatio="none"><path d="M 0 0 H 100 V 40 H 0 Z" fill="white" stroke="none"></path><path d="M 5 5 V 35 M 10 5 V 35 M 12 5 V 35 M 17 5 V 35 M 22 5 V 35 M 24 5 V 35 M 26 5 V 35 M 31 5 V 35 M 36 5 V 35 M 38 5 V 35 M 43 5 V 35 M 45 5 V 35 M 50 5 V 35 M 52 5 V 35 M 54 5 V 35 M 59 5 V 35 M 64 5 V 35 M 66 5 V 35 M 71 5 V 35 M 73 5 V 35 M 78 5 V 35 M 80 5 V 35 M 85 5 V 35 M 90 5 V 35 M 92 5 V 35 M 95 5 V 35" fill="none" stroke="black" stroke-width="2"></path></svg>
                </a>
            </div>
        </div>

        <div id="closed-book-spine" class="w-[20px] md:w-[40px] h-full bg-pink-700 absolute left-1/2 -translate-x-1/2 top-0 shadow-2xl opacity-0 transition-opacity duration-500 pointer-events-none"></div>

        <div id="open-book-spine" class="w-[20px] md:w-[40px] h-full bg-pink-700 absolute left-1/2 -translate-x-1/2 top-0 shadow-2xl opacity-0 transition-opacity duration-500 pointer-events-none">
            <div class="absolute inset-0 bg-gradient-to-r from-black/20 via-transparent to-black/20"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const book = document.getElementById('book');
            const pages = document.querySelectorAll('.page');
            const backCover = document.getElementById('back-cover');
            const closedBookSpine = document.getElementById('closed-book-spine');
            const openBookSpine = document.getElementById('open-book-spine');
            
            const totalPages = pages.length;
            let currentPage = 0;
            let isAnimating = false;

            const pageTurnSound = new Tone.MembraneSynth({
                pitchDecay: 0.01,
                octaves: 3,
                oscillator: { type: 'sine' },
                envelope: {
                    attack: 0.001,
                    decay: 0.2,
                    sustain: 0.01,
                    release: 0.2,
                    attackCurve: 'exponential'
                }
            }).toDestination();

            function updateBookState() {
                closedBookSpine.classList.toggle('opacity-0', currentPage > 0);
                backCover.classList.toggle('opacity-0', currentPage > 0);
                openBookSpine.classList.toggle('opacity-0', currentPage === 0);
                
                pages.forEach((page, index) => {
                    if (index < currentPage) {
                        page.style.zIndex = index + 1;
                    } else {
                        page.style.zIndex = totalPages - index;
                    }
                    page.classList.toggle('flipped', index < currentPage);
                });
            }

            function turnPage(targetPage) {
                if (isAnimating) return;
                
                const originalPage = currentPage;
                targetPage = Math.max(0, Math.min(totalPages, targetPage));
                if (originalPage === targetPage) return;

                isAnimating = true;

                if (Tone.context.state !== 'running') {
                    Tone.start();
                }
                pageTurnSound.triggerAttackRelease("C2", "8n");

                const isTurningForward = targetPage > originalPage;
                const pageToFlip = isTurningForward ? pages[originalPage] : pages[targetPage];

                if (!pageToFlip) {
                    isAnimating = false;
                    return;
                }

                pageToFlip.style.zIndex = totalPages + 1;
                
                currentPage = targetPage;
                pageToFlip.classList.toggle('flipped');

                const onTransitionEnd = () => {
                    pageToFlip.removeEventListener('transitionend', onTransitionEnd);
                    isAnimating = false;
                    updateBookState();
                };
                pageToFlip.addEventListener('transitionend', onTransitionEnd);

                setTimeout(() => {
                    if (isAnimating) {
                        isAnimating = false;
                        updateBookState();
                    }
                }, 1100);
            }

            book.addEventListener('click', (e) => {
                if (e.target.closest('a')) {
                    return;
                }

                const rect = book.getBoundingClientRect();
                const clickX = e.clientX - rect.left;
                if (e.target.closest('.page') || e.target.closest('#back-cover')) {
                    const target = (clickX < rect.width / 2) ? currentPage - 1 : currentPage + 1;
                    turnPage(target);
                }
            });

            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowRight') {
                    turnPage(currentPage + 1);
                } else if (e.key === 'ArrowLeft') {
                    turnPage(currentPage - 1);
                }
            });

            updateBookState();
        });
    </script>

</body>
</html>
